@(users: List[model.User])

@import model._
@import utils._
@import controllers.admin.routes.DashboardController

@scripts = {
    <script type="text/javascript">
        $(document).ready( function(){
            $('#ajax_table_id').dataTable( {
                "columns": [
                    { "title": "Id" },
                    { "title": "FirstName" },
                    { "title": "LastName" },
                    { "title": "NickName" },
                    { "title": "Email" },
                    { "title": "Created At" },
                    { "title": "Wins" },
                    { "title": "Gold" },
                    { "title": "Manager" },
                    { "title": "Energy" },
                    { "title": "Earned Money" },
                    { "title": "TrueSkill" }
                ],
                "data": [
                    @for((p, index) <- users.zipWithIndex) {
                        [
                            "@p.userId",
                            "@p.firstName",
                            "@p.lastName",
                            "@p.nickName",
                            "@p.email",
                            "@GlobalDate.formatDate(p.createdAt)",
                            "@p.wins",
                            "@MoneyUtils.asString(p.calculateGoldBalance())",
                            "@MoneyUtils.asString(p.calculateManagerBalance())",
                            "@MoneyUtils.asString(p.calculateEnergyBalance())",
                            "@MoneyUtils.asString(p.earnedMoney)",
                            "@p.trueSkill"
                        ] @if(index < users.size-1) { , }
                    }
                ],
                "columnDefs": [ {
                    "targets": [7, 8],
                    "mRender": function (data, type, full) {
                        return '<a href="user/' + full[0] + '/transactions">' + data + '</a>';
                    }
                }],
                stateSave: true,
                iDisplayLength: 100,
                "deferRender": true
            } );
        })
    </script>
}

@main("Users - Admin", scripts) {

<h1 class="page-header">Users</h1>

<div class="table-responsive">
    <table id="ajax_table_id" class="table table-striped"></table>
</div>
}