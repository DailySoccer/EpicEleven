@(soccers: List[model.TemplateSoccerPlayer], templateSoccerTeamMap: HashMap[org.bson.types.ObjectId, model.TemplateSoccerTeam], canEditSalaries: Boolean)

@import controllers.admin.routes._

@scripts = {
<script type="text/javascript">

        function isInteger(n) {
            var valid = /^-?[0-9]+$/;
            return valid.test(n) && !isNaN(parseInt(n)) && isFinite(n) && (n % 1 === 0);
        }

        function changeSalary(id, value) {
            if (isInteger(value)) {
                $.ajax({
                    url: "/admin/template_soccer_player/"+id+"/salary/"+value
                });
            }
            else {
                window.alert("Número Entero inválido: " + value);
            }
        }

        $(document).ready( function(){
            $(".edit-salary")
                .keypress(function(e) {
                    if(event.which == 13 /*|| event.which == 9*/) {
                        event.preventDefault();
                        changeSalary($(this).attr("data-player-id"), $(this).html());

                        //$(this).next().attr('data-player-id');
                    }
                })
                .blur(function() {
                    changeSalary($(this).attr("data-player-id"), $(this).html());
                });
        })

    </script>
}

@main("Template Soccer Players - Admin", scripts) {

<h1 class="page-header">Template Soccer Players</h1>

<div class="btn-group" style="display:inline-block;">
@if(canEditSalaries) {
    <a href="@TemplateSoccerPlayerController.index" class="btn btn-with-symbol btn-warning stop">Edit Salaries</a>
} else {
    <a href="@TemplateSoccerPlayerController.editSalaries" class="btn btn-with-symbol btn-success play">Edit Salaries</a>
}
</div>

<h2 class="sub-header"></h2>
<div class="table-responsive">
    <table id="table_id" class="table table-striped">
        <thead>
        <tr>
            <!--th>Id</th-->
            <th>OptaId</th>
            <th>Name</th>
            <th>Field Pos</th>
            <th>Salary</th>
            <th>Fantasy Points</th>
            <th>Played Matches</th>
            <th>Team ID</th>
        </tr>
        </thead>
        <tbody>
        @for(p <- soccers) {
        <tr>
            <!--td>@p.templateSoccerPlayerId</td-->
            <td>@p.optaPlayerId</td>
            <td>@p.name</td>
            <td>@p.fieldPos</td>
            <td class="edit-salary" contenteditable=@canEditSalaries data-player-id=@p.templateSoccerPlayerId>@p.salary</td>
            <td><a href="@TemplateSoccerPlayerController.showStats(p.templateSoccerPlayerId.toString())">@p.fantasyPoints</a></td>
            <td>@p.stats.length</td>
            <td><a href="@TemplateSoccerTeamController.show(p.templateTeamId.toString())">@templateSoccerTeamMap(p.templateTeamId).name</a></td>
        </tr>
        }
        </tbody>
    </table>
</div>

<a href='@DashboardController.index'>Back to Dashboard</a>

}