@(teams_new: List[model.opta.OptaTeam], teams_changed: List[model.opta.OptaTeam], teams_invalid: List[model.opta.OptaTeam], competitionFilter: String = "*", competitions: Set[String])

@import controllers.admin.routes.ImportController

@include_columns() = {
    { "title": "Id" },
    { "title": "Name" },
    { "title": "ShortName" },
    { "title": "Competitions" }
}

@include_teams(team_list : List[model.opta.OptaTeam]) = {
    @for((p, index) <- team_list.zipWithIndex) {
        [
            "@p.optaTeamId",
            "@p.name",
            "@p.shortName",
            "@p.competitionIds"
        ] @if(index < team_list.size-1) { , }
    }
}

@scripts = {
    <script type="text/javascript">
        $(document).ready( function(){
            $('#ajax_table_new').dataTable( {
                "columns": [ @include_columns() ],
                "data": [ @include_teams(teams_new) ],
                stateSave: true,
                iDisplayLength: 100,
                "deferRender": true
            } );

            $('#ajax_table_changed').dataTable( {
                "columns": [ @include_columns() ],
                "data": [ @include_teams(teams_changed) ],
                stateSave: true,
                iDisplayLength: 100,
                "deferRender": true
            } );

            $('#ajax_table_invalid').dataTable( {
                "columns": [ @include_columns() ],
                "data": [ @include_teams(teams_invalid) ],
                stateSave: true,
                iDisplayLength: 10,
                "deferRender": true
            } );
        })
    </script>
}

@main("Import Teams - Admin", scripts) {

<ul class="nav nav-tabs" role="tablist">
    <li class="active"><a href="@ImportController.showImportTeams" role="tab">Import Teams</a></li>
    <li><a href="@ImportController.showImportSoccers" role="tab">Import SoccerPlayers</a></li>
    <li><a href="@ImportController.showImportMatchEvents" role="tab">Import MatchEvents</a></li>
</ul>
<br/>

<h1 class="page-header">Import Teams</h1>

<h2 class="sub-header"></h2>

<!--div class="col-md-12">
@if((teams_new != null && !teams_new.isEmpty) || (teams_changed != null && !teams_changed.isEmpty)) {
<a href="@ImportController.importAllTeams"><button name="ok" type="submit" class="btn btn-success">Import All</button></a>
}
</div-->

<div class="col-md-6">
    @if(teams_new != null && !teams_new.isEmpty) {
    <div>
        @if(competitionFilter == "*") {
            <a href="@ImportController.importAllNewTeams" class="btn btn-success">Import New (@teams_new.size)</a>
        } else {
            <a href="@ImportController.importAllNewTeamsFromCompetition(competitionFilter)" class="btn btn-success">Import New (@teams_new.size)</a>
        }
        <span class="dropdown">
        <a data-toggle="dropdown" href="#">Competition: @competitionFilter</a>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
            @if(competitionFilter != "*") {
                <li><a href='@ImportController.showImportTeams'>Competition *</a></li>
            }
            @for(competition <- competitions) {
                <li><a href='@ImportController.showImportTeamsFromCompetition(competition)'>Competition @competition</a></li>
            }
        </ul>
        </span>
    </div>
    <br/>

    <table id="ajax_table_new" class="table table-striped table-responsive">
        <caption class="bg-primary">NEW</caption>
    </table>
    }
</div>

<div class="col-md-6">
    @if(teams_changed != null && !teams_changed.isEmpty) {
    <div><a href="@ImportController.importAllChangedTeams"><button name="ok" type="submit" class="btn btn-success">Import Changed (@teams_changed.size)</button></a></div>
    <br/>

    <table id="ajax_table_changed" class="table table-striped table-responsive">
        <caption class="bg-info">CHANGED</caption>
    </table>

    }
</div>

<div class="col-md-12">
    @if(teams_invalid != null && !teams_invalid.isEmpty) {
    <table id="ajax_table_invalid" class="table table-striped table-responsive">
        <caption class="bg-danger">INVALID</caption>
    </table>
    }
</div>

}