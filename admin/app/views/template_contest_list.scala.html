@(template_contests: List[model.TemplateContest])

@import model._

@scripts = {
    <script type="text/javascript">

        function updatePage() {
            console.log("reload");
            window.location.reload(true);
        }

        $(document).ready( function(){
            window.setInterval(updatePage, 10000);
        })

    </script>
}

@contest_state(template_contest_id : String) = {
    @if(TemplateContest.isFinished(template_contest_id)) {
        <button class="btn btn-danger" value="@template_contest_id">Finished</button>
    } else {
        @if(TemplateContest.isStarted(template_contest_id)) {
            <button class="btn btn-success" value="@template_contest_id">Live</button>
        } else {
            <button class="btn btn-warning" value="@template_contest_id">Waiting</button>
        }
    }
}

@main("Template Contests - Admin", scripts) {

<h1 class="page-header">Template Contests</h1>

<a href="@AdminController.addTemplateContest"><button class="btn btn-success">Add Contest</button></a>
<a href="@AdminController.createAllTemplateContests"><button class="btn btn-danger">Create All Contests</button></a>

<h2 class="sub-header"></h2>
<div class="table-responsive">
    <table id="table_id" class="table table-striped">
        <thead>
        <tr>
            <!--th>Id</th-->
            <th>State</th>
            <th>Name</th>
            <th>PostName</th>
            <th>Num. Matches</th>
            <th>Min Instances</th>
            <th>Max Entries</th>
            <th>Salary Cap</th>
            <th>Entry Fee</th>
            <th>Prize Type</th>
            <th>Start Date</th>
            <th>State</th>
            <th></th>
            <!--
            @for(i <- 0 to 10) {
            <th>Match Event @i</th>
            }
            -->
        </tr>
        </thead>
        <tbody>
        @for(p <- template_contests) {
        <tr>
            <!--td>@p.templateContestId</td-->
            <td>@p.state</td>
            <td>@p.name</td>
            <td>@p.postName</td>
            <td>@p.templateMatchEventIds.size()</td>
            <td>@p.minInstances</td>
            <td>@p.maxEntries</td>
            <td>@p.salaryCap</td>
            <td>@p.entryFee</td>
            <td>@p.prizeType</td>
            <td>@p.startDate.format("yyyy/MM/dd HH:mm:ss")</td>
            <td>@contest_state(p.templateContestId.toString())</td>
            <td>
                <a href="@AdminController.editTemplateContest(p.templateContestId.toString())"><button class="btn btn-success">Edit</button></a>
                <a href="@AdminController.deleteTemplateContest(p.templateContestId.toString())"><button class="btn btn-danger">-</button></a>
            </td>
        </tr>
        }
        </tbody>
    </table>
</div>

<a href='@AdminController.dashBoard'>Back to Dashboard</a>

}