@(match_events: List[model.MatchEvent])

@import model._
@import controllers.admin.routes._

@scripts = {
<script type="text/javascript">

        function updatePage() {
            $.ajax({
                url: "/admin/is_paused",
                success: function(result) {
                    if (result == "false") {
                        window.location.reload(true);
                    }
                }
            });
        }

        $(document).ready( function(){
            window.setInterval(updatePage, 10000);
        })

    </script>
}

@match_event_state(match_event_id : String) = {
    @if(TemplateMatchEvent.isFinished(match_event_id)) {
        <button class="btn btn-danger state_match_event" value="@match_event_id">Finished</button>
    } else {
        @if(TemplateMatchEvent.isStarted(match_event_id)) {
            <button class="btn btn-success state_match_event" value="@match_event_id">Live</button>
        } else {
            <button class="btn btn-warning state_match_event" value="@match_event_id">Waiting</button>
        }
    }
}

@main("Mach Events - Admin", scripts) {

<h1 class="page-header">Match Events</h1>

<h2 class="sub-header"></h2>
<div class="table-responsive">
    <table id="table_id" class="table table-striped">
        <thead>
        <tr>
            <!--th>Id</th-->
            <th>OptaId</th>
            <th>OptaTeamAId</th>
            <th>OptaTeamBId</th>
            <th>Teams</th>
            <th>Start Date</th>
            <th>State</th>
        </tr>
        </thead>
        <tbody>
        @for(p <- match_events) {
        <tr>
            <!--td>@p.templateMatchEventId</td-->
            <td>@p.optaMatchEventId</td>
            <td>@p.soccerTeamA.optaTeamId</td>
            <td>@p.soccerTeamB.optaTeamId</td>
            <td>
                <a href="@MatchEventController.show(p.matchEventId.toString())">
                    @if(p.isStarted()) {
                        @p.soccerTeamA.name (@p.getFantasyPoints(p.soccerTeamA)) vS @p.soccerTeamB.name (@p.getFantasyPoints(p.soccerTeamB))
                    } else {
                        @p.soccerTeamA.name vS @p.soccerTeamB.name
                    }
                </a></td>
            <td>@p.startDate.format("yyyy/MM/dd HH:mm:ss")</td>
            <td>@match_event_state(p.templateMatchEventId.toString())</td>
        </tr>
        }
        </tbody>
    </table>
</div>

<a href='@DashboardController.index'>Back to Dashboard</a>

}